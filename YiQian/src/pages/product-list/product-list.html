<!--
  Generated template for the ProductListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>商品管理</ion-title>
    <ion-buttons end>
      <button ion-button (click)="toCategory()">分类</button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content no-padding >
  <div *ngIf="length==0">
    <img src="assets/imgs/commodity_no.png" style="margin-top: 90px;position: absolute;width: 100%;">
  </div>
  <div *ngIf="length!=0">
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="下拉可以刷新"
      refreshingSpinner="circles"
      refreshingText="正在加载....">
    </ion-refresher-content>
  </ion-refresher>
  <ion-searchbar
    [(ngModel)]="name"
    showCancelButton="false"
    (ionInput)="onInput($event)"
    placeholder="请输入商品名称、数字、拼音">
  </ion-searchbar>
    <ion-list><ion-item>
      <p>总正库存 {{TotalStock}} ,总成本 {{TotalPrice}} </p>
      <button item-end icon-only style="background: none" (click)="gotoAddCategory()"><ion-icon style="color:#FF6A3C " name="add"></ion-icon></button>
    </ion-item>
    </ion-list>


  <ion-list>
    <button ion-item *ngFor="let product of products">
      <ion-thumbnail class="imageDiv">
        <img  style="width: 70%;height: 70%" src="assets/imgs/c_goodspicture.png" *ngIf="product.images.length==0">
        <img style="width: 70%;height: 70%" [src]="product.images[0]" *ngIf="product.images.length!=0">
      </ion-thumbnail>
        <div class="showDiv">
          <ion-row> <p style="color: #000;font-size: 20px">{{product.name}}</p></ion-row>

      <ion-row><p style="color: #FF6A3C;font-size: 17px" >￥{{product.price}}</p></ion-row>
          <ion-row>
            <p style="margin-left: 5px">库存:{{product.stock}}</p>
          </ion-row>
        </div>
    </button>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="加载更多商品数据...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
  </div>
</ion-content>
